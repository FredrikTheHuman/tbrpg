<!doctype html>
<meta charset="utf-8">
<title>TBRPG – lobby test</title>
<h1>TBRPG – lobby test</h1>

<!-- ── UI placeholders ─────────────────────────────── -->
<label>Name: <input id="nameBox" placeholder="your name"></label>
<button id="joinBtn">Join world</button>

<h2 id="onlineHdr" hidden>Players online:</h2>
<ul id="onlineList"></ul>

<!-- ── Socket-io handshake ──────────────────────────── -->
<script src="/socket.io/socket.io.js"></script>
<script>
const sock      = io();                           // opens WebSocket
const nameBox   = document.getElementById('nameBox');
const joinBtn   = document.getElementById('joinBtn');
const onlineHdr = document.getElementById('onlineHdr');
const onlineUl  = document.getElementById('onlineList');

// 1. prompt → join
joinBtn.onclick = () => {
  const name = nameBox.value.trim();
  if (!name) return alert('Pick a name first!');
  sock.emit('join', { name });                    // send to server
  joinBtn.disabled = true;
  nameBox.disabled = true;
};

// 2. receive full player list
sock.on('playerList', list => {
  onlineUl.innerHTML = '';                        // clear
  list.forEach(n => {
    const li = document.createElement('li');
    li.textContent = n;
    onlineUl.appendChild(li);
  });
  onlineHdr.hidden = list.length === 0;
});

// optional: show own socket id in console
sock.on('connect', () => console.log('Connected as', sock.id));
</script>
